# ゲーム画面のレイアウトとハーベストステータス調整メモ

このドキュメントは、現状の `/src/app/game` 周りで行った変更点と拡張ポイントをまとめたものです。今後別のエンジニアが追従できるように、目的と実装の入口を簡潔に記載しています。

## 変更概要
- `page.tsx` を中央寄せのレイアウトに更新し、背景を緑系グラデーションに変更しました。今後ゲーム本編の UI は `.stage` に収める想定です。
- `HarvestStatus` のサイズをビューポートに応じて縮む/広がるように CSS (`clamp`) でレスポンシブ化しました。小さいウィンドウでもカードが画面に収まります。
- `page.module.css` を新規追加し、全体背景・中央配置・コンテンツ枠のスタイルを管理します。

> **重要: ゲームロジックや各シチュエーションの UI はこのブランチには含まれていません。** 以前の作業内容（シーン遷移、ポップアップ、収穫率変動など）はリセットされており、必要に応じて再度組み込む必要があります。

## 未対応の実装と再構築のポイント
- 収穫率を操作するゲーム状態管理フック（例: `useGameState`）と、行動結果のポップアップ表示、農家カットイン表示の仕組み。
- ミルク/通販/節水/エアコンなどの各シチュエーションコンポーネント。`public/tmp.png` を使ったプレースホルダーでも構いません。
- 行動ごとに最低 ±30% の収穫率変動を与え、環境負荷が大きいものは ±50% で扱うロジック。
- シーン内で移動を伴わない選択肢を 1 回のみ実行できるようにする制御。
- 3 シチュエーション完了後に最終結果画面へ遷移し、行動ログを表示するフロー。

### 再実装のヒント
- 画面配置は `src/app/game/page.tsx` の `container`/`stage` をそのまま使い、シーン本体を `stage` 内に埋め込む。
- HarvestStatus の位置は fixed で右上。縦中央寄せのコンテンツと重ならないよう `top`/`right` を `clamp` で調整済み。必要なら CSS を追加してください。
- シチュエーションや行動選択をデータ駆動にしたい場合、`/src/app/game/data` ディレクトリを用意し JSON/TS で定義すると管理しやすくなります。

## 関連ファイル
- `src/app/game/page.tsx`
  - メインエントリ。背景カラー、中央ステージ、`HarvestStatus` の常時表示を行います。
- `src/app/game/page.module.css`
  - ゲーム画面の背景（緑グラデーション）と中央ステージのスタイル定義。
- `src/app/game/components/HarvestStatus.module.css`
  - 収穫量ステータスのカードサイズ・フォントを `clamp()` でレスポンシブ化。

## 拡張のヒント
- ステージ中央に表示したいシーンコンポーネントを `page.tsx` の `<section className={styles.stage}>` 内に置いてください。背景や余白は CSS 側で調整できます。
- `HarvestStatus` は `position: fixed` で右上に配置しています。`top`/`right` は `clamp` で調整済みですが、必要なら `page.module.css` と揃える形で位置を変更してください。
- 追加の UI やシーンを組み込みたい場合は、`page.tsx` で状態管理フック（未実装）を使う形に置き換えてください。現在はプレースホルダの `p` タグのみです。

## 今後の実装 TODO（本ドキュメントのスコープ外）
- 行動選択に伴う収穫量の増減・カットイン演出、各シチュエーションのシーン実装。
- シチュエーションを重複なしでランダム選択し、全 3 回終了後に結果画面へ遷移するロジック。
- ご飯タイムのリッチ UI、行動ログの蓄積と表示など、ゲーム進行まわりのフロー構築。
